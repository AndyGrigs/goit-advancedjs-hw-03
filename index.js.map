{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\nimport axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"28460995-5acfdb805ab0c27f2bf717abb\"; \n\n\nexport async function loadImages(query) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n  });\n  \n  const response = await axios.get(`${BASE_URL}?${params}`);\n  return response.data;\n}\n","export function createPthotsHtml(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <a href=${largeImageURL} class=\"gallery_link\">\n          <img src=${webformatURL} alt=${tags} loading=\"lazy\">\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              ${likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b>\n              ${views}\n\n            </p>\n            <p class=\"info-item\">\n              <b>comments</b>\n              ${comments}\n\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n              ${downloads}\n\n            </p>\n          </div>\n        </a>\n        `;\n      }\n    )\n    .join('');\n}\n","\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { loadImages } from './js/pixabay-api';\nimport { createPthotsHtml } from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('#loader'),\n};\n\nlet lightbox = null;\n\nrefs.form.addEventListener('submit', doSearchPhotos);\n\nasync function doSearchPhotos(e) {\n  e.preventDefault();\n\n  const query = e.currentTarget.elements.search.value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: 'Stop!',\n      message: 'The field mast be filled up!!!',\n    });\n    return;\n  }\n\n  showLoader();\n\n  try {\n    refs.gallery.innerHTML = '';\n    const data = await loadImages(query);\n    console.log(data);\n    hideLoader();\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'No results!',\n      });\n      return;\n    }\n\n    const imagesHtml = createPthotsHtml(data.hits);\n    refs.gallery.insertAdjacentHTML('beforeend', imagesHtml);\n    refs.form.reset();\n\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox(\".gallery a\", {close: true});\n    } else {\n      lightbox.refresh();\n    }\n\n  } catch (error) {\n    hideLoader();\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }\n}\n\nfunction showLoader() {\n  refs.loader.classList.add('visible');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.remove('visible');\n}\n"],"names":["BASE_URL","API_KEY","loadImages","query","params","axios","createPthotsHtml","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","lightbox","doSearchPhotos","e","iziToast","showLoader","data","hideLoader","imagesHtml","SimpleLightbox","error"],"mappings":"owBAIA,MAAMA,EAAW,2BACXC,EAAU,qCAGT,eAAeC,EAAWC,EAAO,CACtC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAGD,OADiB,MAAME,EAAM,IAAI,GAAGL,CAAQ,IAAII,CAAM,EAAE,GACxC,IAClB,CCnBO,SAASE,EAAiBC,EAAQ,CACvC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,kBACGL,CAAa;AAAA,qBACVD,CAAY,QAAQE,CAAI;AAAA;AAAA;AAAA;AAAA,gBAI7BC,CAAK;AAAA;AAAA;AAAA;AAAA,gBAILC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAOpB,EACA,KAAK,EAAE,CACZ,CChCA,MAAMC,EAAO,CACX,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEA,IAAIC,EAAW,KAEfD,EAAK,KAAK,iBAAiB,SAAUE,CAAc,EAEnD,eAAeA,EAAeC,EAAG,CAC/BA,EAAE,eAAc,EAEhB,MAAMf,EAAQe,EAAE,cAAc,SAAS,OAAO,MAAM,OACpD,GAAI,CAACf,EAAO,CACVgB,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,gCACf,CAAK,EACD,MACD,CAEDC,IAEA,GAAI,CACFL,EAAK,QAAQ,UAAY,GACzB,MAAMM,EAAO,MAAMnB,EAAWC,CAAK,EAGnC,GAFA,QAAQ,IAAIkB,CAAI,EAChBC,IACID,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,MAAM,CACb,MAAO,aACf,CAAO,EACD,MACD,CAED,MAAMI,EAAajB,EAAiBe,EAAK,IAAI,EAC7CN,EAAK,QAAQ,mBAAmB,YAAaQ,CAAU,EACvDR,EAAK,KAAK,QAGLC,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIQ,EAAe,aAAc,CAAC,MAAO,EAAI,CAAC,CAK5D,OAAQC,EAAO,CACdH,IACA,QAAQ,MAAMG,CAAK,EACnBN,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACF,CACH,CAEA,SAASC,GAAa,CACpBL,EAAK,OAAO,UAAU,IAAI,SAAS,CACrC,CAEA,SAASO,GAAa,CACpBP,EAAK,OAAO,UAAU,OAAO,SAAS,CACxC"}